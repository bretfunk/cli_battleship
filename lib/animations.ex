defmodule Animations do
  def clear_screen do
    IO.puts("\e[H\e[2J")
  end

  def intro_animation() do
    :timer.sleep(250)
    IO.puts(" ____       _______ _______ _      ______  _____ _    _ _____ _____  ")
    :timer.sleep(250)
    IO.puts("|  _ \\   /\\|__   __|__   __| |    |  ____|/ ____| |  | |_   _|  __ \\ ")
    :timer.sleep(250)
    IO.puts("| |_) | /  \\  | |     | |  | |    | |__  | (___ | |__| | | | | |__) |")
    :timer.sleep(250)
    IO.puts("|  _ < / /\\ \\ | |     | |  | |    |  __|  \\___ \\|  __  | | | |  ___/ ")
    :timer.sleep(250)
    IO.puts("| |_) / ____ \\| |     | |  | |____| |____ ____) | |  | |_| |_| |     ")
    :timer.sleep(250)
    IO.puts("|____/_/    \\_\\_|     |_|  |______|______|_____/|_|  |_|_____|_|")
    :timer.sleep(250)
  end

  def pause_animation(num) do
    if num === 0 do
      nil
    else
      IO.puts(" ")
      :timer.sleep(250)
      pause_animation(num - 1)
    end
  end

  def start_animation(num) do
    Animations.clear_screen()

    case num do
      3 ->
        IO.puts("""
                            /|
                          ///|
                        /////|
                      ///////|
                    /////////|
              \==========|===/
        ~~~~~~~~~~~~~~~~~~~~~
        """)

        :timer.sleep(1000)
        start_animation(num - 1)

      2 ->
        IO.puts("""
                                                /|
                                              ///|
                                            /////|
                                          ///////|
                                        /////////|
                                  \==========|===/
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        """)

        :timer.sleep(1000)
        start_animation(num - 1)

      1 ->
        IO.puts("""
                                                                    /|
                                                                  ///|
                                                                /////|
                                                              ///////|
                                                            /////////|
                                                      \==========|===/
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        """)

        :timer.sleep(1000)
        start_animation(num - 1)

      0 ->
        enemy_cutscene("""
        SURRENDER PIRATES,
        WE HAVE YOU SURROUNDED
        """)

        Music.lose_music()

      _ ->
        nil
    end
  end

  def miss_animation() do
    Animations.clear_screen()

    IO.puts("""
    __  __ _____  _____ _____ 
    |  \/  |_   _|/ ____/ ____|
    | \  / | | | | (___| (___  
    | |\/| | | |  \___ \\___ \ 
    | |  | |_| |_ ____) |___) |
    |_|  |_|_____|_____/_____/ 
    """)

    :timer.sleep(500)
    IO.gets("Press Enter to Continue.")
  end

  def win_animation() do
    cutscene("Captain, we have destroyed the enemy ships!")
    Animations.clear_screen()

    IO.puts("""
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░░░░▓████████████████████████▒░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░▓█████▓▒░░░░░░░░░░░░░░░▒██████▒░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░████▒░░░░░░░░░░░░░░░░░░░░░░░░░▓███▒░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░███░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░███░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░░░░░░░░░░
    """)

    :timer.sleep(500)
    Animations.clear_screen()

    IO.puts("""
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░░░░▓████████████████████████▒░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░▓█████▓▒░░░░░░░░░░░░░░░▒██████▒░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░████▒░░░░░░░░░░░░░░░░░░░░░░░░░▓███▒░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░███░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░███░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░██▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒░░██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░
    ░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░
    ░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░
    ░░░░░░░░░░░░░██▒░██▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██▓░▒██░░░░░░░░░░░░
    ░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░██▒░██░░░░░▒▒▓███▒░░░░░░░▒███▓▒▒░░░░░██░▓██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░██░██░░██████████▒░░░░░▓██████████░░██▒██░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░████░████████████░░░░░████████████░████░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░███░▒██████████░░░░░░░██████████▒░██▒░░░░░░░░░▒░░░░░░
    ░░░░░▒████░░░░░░░▓█▒░░█████████░░░░░░░░░█████████░░▒█▓░░░░░░▓████░░░░░
    """)

    :timer.sleep(500)
    Animations.clear_screen()

    IO.puts("""
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░░░░▓████████████████████████▒░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░▓█████▓▒░░░░░░░░░░░░░░░▒██████▒░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░████▒░░░░░░░░░░░░░░░░░░░░░░░░░▓███▒░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░███░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░███░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░██▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒░░██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░
    ░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░
    ░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░
    ░░░░░░░░░░░░░██▒░██▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██▓░▒██░░░░░░░░░░░░
    ░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░██▒░██░░░░░▒▒▓███▒░░░░░░░▒███▓▒▒░░░░░██░▓██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░██░██░░██████████▒░░░░░▓██████████░░██▒██░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░████░████████████░░░░░████████████░████░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░███░▒██████████░░░░░░░██████████▒░██▒░░░░░░░░░▒░░░░░░
    ░░░░░▒████░░░░░░░▓█▒░░█████████░░░░░░░░░█████████░░▒█▓░░░░░░▓████░░░░░
    ░░░░░██░▒██▒░░░░░██░░░░██████▓░░░░█░█░░░░███████░░░░██░░░░░███░░██░░░░
    ░░░░░██░░░██▓░░░░██░░░░░░▒▓▓░░░░▒██░██░░░░░▓▓▒░░░░░▒██░░░░███░░░██░░░░
    ░░░▓██▒░░░░████▓░░██░░░░░░░░░░░░███░███░░░░░░░░░░░░██░░█████░░░░▓██▒░░
    ░░██▓░░░░░░░░▒████████▓░░░░░░░░████░███▓░░░░░░░▒▓████████░░░░░░░░░███░
    ░░██▓▒▓███▓░░░░░░▓████████▓░░░░████░███▓░░░░▓████████▓░░░░░░████▓▓███░
    ░░░███████████▒░░░░░░███████░░░░██░░░██░░░░██████▓░░░░░░▓███████████░░
    ░░░░░░░░░░░░▓█████░░░░██▓▓░██░░░░░░░░░░░░░██░█▒██░░░▒█████▓░░░░░░░░░░░
    ░░░░░░░░░░░░░░░▒█████▒▒█▓█░███▓▓▒▒▒▓▒▒▓▓▓███▒███░▓█████░░░░░░░░░░░░░░░
    """)

    :timer.sleep(500)
    Animations.clear_screen()

    IO.puts("""
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░░░░▓████████████████████████▒░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░▓█████▓▒░░░░░░░░░░░░░░░▒██████▒░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░████▒░░░░░░░░░░░░░░░░░░░░░░░░░▓███▒░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░███░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░███░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░▒██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░██▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒░░██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░
    ░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░
    ░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░
    ░░░░░░░░░░░░░██▒░██▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██▓░▒██░░░░░░░░░░░░
    ░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░██▒░██░░░░░▒▒▓███▒░░░░░░░▒███▓▒▒░░░░░██░▓██░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░██░██░░██████████▒░░░░░▓██████████░░██▒██░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░████░████████████░░░░░████████████░████░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░███░▒██████████░░░░░░░██████████▒░██▒░░░░░░░░░▒░░░░░░
    ░░░░░▒████░░░░░░░▓█▒░░█████████░░░░░░░░░█████████░░▒█▓░░░░░░▓████░░░░░
    ░░░░░██░▒██▒░░░░░██░░░░██████▓░░░░█░█░░░░███████░░░░██░░░░░███░░██░░░░
    ░░░░░██░░░██▓░░░░██░░░░░░▒▓▓░░░░▒██░██░░░░░▓▓▒░░░░░▒██░░░░███░░░██░░░░
    ░░░▓██▒░░░░████▓░░██░░░░░░░░░░░░███░███░░░░░░░░░░░░██░░█████░░░░▓██▒░░
    ░░██▓░░░░░░░░▒████████▓░░░░░░░░████░███▓░░░░░░░▒▓████████░░░░░░░░░███░
    ░░██▓▒▓███▓░░░░░░▓████████▓░░░░████░███▓░░░░▓████████▓░░░░░░████▓▓███░
    ░░░███████████▒░░░░░░███████░░░░██░░░██░░░░██████▓░░░░░░▓███████████░░
    ░░░░░░░░░░░░▓█████░░░░██▓▓░██░░░░░░░░░░░░░██░█▒██░░░▒█████▓░░░░░░░░░░░
    ░░░░░░░░░░░░░░░▒█████▒▒█▓█░███▓▓▒▒▒▓▒▒▓▓▓███▒███░▓█████░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░▒████▒▓█▒▒█░█▒█░█░█▓█▒█▓░█░█████▒░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░░░██░░██▓█▓█▓█▒█▒█▓█▓████░▓█▓░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░▓████▓░▓█▓█░█▒█░█░█▒█▒███▒░██████░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░▓█████░░██░░░▒█████▓█▓█████▒░░░██░▒█████▓░░░░░░░░░░░░░░
    ░░░░░░▒██████████▓░░░░░███░░░░░░░░░░░░░░░░░░░██▒░░░░░▓██████████▒░░░░░
    ░░░░░░██░░░▓▓▓░░░░░░▒██████▓░░░░░░░░░░░░░░░███████▒░░░░░░▓▓▒░░▒██░░░░░
    ░░░░░░▓██░░░░░░░░▓████▓░░░█████▒░░░░░░▒▓█████░░░▓████▓░░░░░░░▒██▓░░░░░
    ░░░░░░░░███░░░░████▒░░░░░░░░▓█████████████▒░░░░░░░░▒████░░░░███░░░░░░░
    ░░░░░░░░░██░░░██▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓██░░░██░░░░░░░░
    ░░░░░░░░░██▒▓██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒██▒▓██░░░░░░░░
    ░░░░░░░░░░████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░████░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    """)

    :timer.sleep(500)
    Animations.clear_screen()

    IO.puts("""
    /$$     /$$ /$$$$$$  /$$   /$$    /$$      /$$ /$$$$$$ /$$   /$$
    | $$   /$$//$$__  $$| $$  | $$   | $$  /$ | $$|_  $$_/| $$$ | $$
    \\ $$ /$$/| $$  \\ $$| $$  | $$    | $$ /$$$| $$  | $$  | $$$$| $$
    \\ $$$$/  | $$  | $$| $$  | $$    | $$/$$ $$ $$  | $$  | $$ $$ $$
    \\  $$/   | $$  | $$| $$  | $$    | $$$$_  $$$$  | $$  | $$  $$$$
    | $$     | $$  | $$| $$  | $$    | $$$/ \\  $$$  | $$  | $$\\  $$$
    | $$     |  $$$$$$/|  $$$$$$/    | $$/   \\  $$ /$$$$$$| $$ \\  $$
    |__/    \\______/  \\______/       |__/     \\__/|______/|__/  \\__/
    """)

    Battleship.prompt("Press Enter to Continue")
  end

  def hit_animation() do
    Animations.clear_screen()

    IO.puts("""
          )
    (
    .-`-.
    :   :
    :TNT:
    :___:
    """)

    :timer.sleep(200)
    Animations.clear_screen()

    IO.puts("""

    \\|/
    - o -
    /-`-.
    :   :
    :TNT:
    :___:
    """)

    :timer.sleep(200)
    Animations.clear_screen()

    IO.puts("""
    .---.
    : | :
    :-o-:
    :_|_:
    """)

    :timer.sleep(200)
    Animations.clear_screen()

    IO.puts("""
    .---.
    (\\|/)
    --0--
    (/|\\)
    """)

    :timer.sleep(200)
    Animations.clear_screen()

    IO.puts("""
    '.\\|/.'
    (\\   /)
    - -O- -
    (/   \\)
    ,'/|\\'.
    """)

    :timer.sleep(200)
    Animations.clear_screen()

    IO.puts("""
    '.  \\ | /  ,'
    `. `.' ,'
    ( .`.|,' .)
    - ~ -0- ~ -
    (
    """)

    :timer.sleep(200)
    Animations.clear_screen()

    IO.puts("""
    ','|'.` )
    .' .'. '.
    ,'  / | \\  '.
    \\ '  "  
    ` . `.' ,'
    . `` ,'. "
    ~ (   ~ -
    '
    """)

    :timer.sleep(200)
    Animations.clear_screen()

    IO.puts("""

    . ','|` ` .
    .'  "  '
    ,   ' , '  `

    (  ) (
    ) ( )
    (  )
    ) /
    ,---.
    """)

    :timer.sleep(200)
    Animations.clear_screen()

    IO.puts("""
    _.-^^---....,,--       
    _--                  --_  
    <                        >)
    |                         | 
    \\._                   _./  
    ```--. . , ; .--'''       
        | |   |             
     .-=||  | |=-.   
     `-=#$%&%$#=-'   
        | ;  :|     
    _____.,-#%&$@%#&#~,._____

    """)

    :timer.sleep(800)
    Animations.clear_screen()

    IO.puts("""
     /$$   /$$ /$$$$$$ /$$$$$$$$
    | $$  | $$|_  $$_/|__  $$__/
    | $$  | $$  | $$     | $$
    | $$$$$$$$  | $$     | $$
    | $$__  $$  | $$     | $$
    | $$  | $$  | $$     | $$
    | $$  | $$ /$$$$$$   | $$
    |__/  |__/|______/   |__/
    """)

    IO.gets("Press Enter to Continue")
  end

  def cutscene(text, pause \\ false) do
    Animations.clear_screen()
    graphic(text)
    sound(text)
    if(pause, do: IO.gets("Press Enter to Continue"))
  end

  def enemy_cutscene(text, pause \\ false) do
    Animations.clear_screen()

    IO.puts("""
    #{text}
    |________________________|
      \\
                 ________
                /        \\
             __/       (o)\\__
            /     ______\\\   \\
            |____/__  __\\____|
               [  --~~--  ]
                |(  L   )|
         ___----\\  __  /----___
        /   |  < \\____/ >   |   \\
        /    |   < \\--/ >    |    \\
        ||||||    \\ \\/ /     ||||||
        |          \\  /   o       |
        |     |     \\/   === |    |
        |     |      |o  ||| |    |
        |     \\______|   +#* |    |
        |            |o      |    |
        \\           |      /     /
        |\\__________|o    /     /
        |           |    /     /
    """)

    if(pause, do: IO.gets("Press Enter to Continue"))
  end

  def graphic(text) do
    IO.puts("""
    #{text}
    |____________________|
      \\
        _.-----._ 
       _'    '    '_
      '_____________'
          | +_+ |
      ==--'_D__,'---==.
     /    > \_/ <     |
    /  >__\o_| o/     |
    |      | |_/    , |
    \,_____/_)  o   | |
       |   o '  o   | |
       |   o |  o   |_/|
       '   o |  o   '  |
       |   o |  o   |_/
       |   o |  o   |))
       |     |      |
       |     \      |
       |___o/ \_____|
         |   |   |
       __)  >|<  (__
      (____,_|_,____)
    """)
  end

  def sound(text) do
    if(DevConfig.sound(), do: System.cmd("say", [text]))
  end

  def show_rules do
    rules = """
    Here is the situation.
    We both have three ships.
    The first to sink all opponent ships wins.
    Should we stay in our current random location
    or do you want to position us elsewhere?
    """

    cutscene(rules)
  end

  def cutscene_one() do
    cutscene("""
    Captain, an IRS ship
    is coming to tax us!
    What should we do?
    """)

    surrender? =
      IO.gets("Press \"S\" to Surrender.  Press \"F\" to Fight\n")
      |> String.upcase()
      |> String.trim()

    Animations.clear_screen()
    Battleship.surrender(surrender?)
  end

  def lose_ending() do
    enemy_speech = """
    HAHA, YOU PIRATES WILL NEVER LEARN,
    THE HOUSE ALWAYS WINS.
    """

    Animations.enemy_cutscene(enemy_speech)
    Music.lose_music()

    # Animations.cutscene(
    #   """
    #   Captain, it has been an honor to serve with you.
    #   """,
    #   true
    # )

    Animations.clear_screen()
    play_again? = Battleship.prompt("Would you like to play again? Y or N")

    Battleship.play_again(play_again?)
  end
end
